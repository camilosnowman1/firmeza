<div class="container mt-4">
  <h2 class="mb-4">Catálogo de Productos</h2>

  <div *ngIf="loading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error">
    <div class="row row-cols-1 row-cols-md-3 g-4">
      <div class="col" *ngFor="let product of products">
        <div class="card h-100 shadow-sm">
          <img [src]="product.imageUrl || 'https://via.placeholder.com/300x200?text=' + product.name"
            class="card-img-top" alt="{{ product.name }}" style="height: 200px; object-fit: cover;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ product.name }}</h5>
            <p class="card-text text-muted">{{ product.description }}</p>
            <div class="mt-auto d-flex justify-content-between align-items-center">
              <span class="h5 mb-0 text-primary">{{ product.price | currency }}</span>
              <button class="btn btn-outline-primary" (click)="addToCart(product)">
                <i class="bi bi-cart-plus"></i> Agregar
              </button>
            </div>
          </div>
          <div class="card-footer text-muted">
            Stock: {{ product.stock }}
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination Controls -->
    <nav aria-label="Product pagination" class="mt-4" *ngIf="totalPages > 1">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" (click)="previousPage()" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        <li class="page-item" *ngFor="let page of pageNumbers" [class.active]="page === currentPage">
          <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" (click)="nextPage()" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
      <div class="text-center text-muted">
        Mostrando {{ products.length }} de {{ totalCount }} productos | Página {{ currentPage }} de {{ totalPages }}
      </div>
    </nav>
  </div>
</div>